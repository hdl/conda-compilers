name: build-packages
on:
  push:
    paths-ignore:
      - '.github/workflows/tuttest.yml'
      - 'README.md'
  pull_request:
    paths-ignore:
      - '.github/workflows/tuttest.yml'
      - 'README.md'
  workflow_dispatch:
  schedule:
    - cron: '0 3 * * *' # run daily at 3:00am (UTC)
env:
  ANACONDA_TOKEN: ${{ secrets.ANACONDA_TOKEN }}
  ANACONDA_USER: ${{ secrets.ANACONDA_USER }}
  NUM_OF_JOBS: 39
defaults:
  run:
    shell: bash
jobs:
  gcc-newlib-riscv32-linux:
    runs-on: "ubuntu-16.04"
    env:
      PACKAGE: "gcc/newlib"
      OS_NAME: "linux"
      TOOLCHAIN_ARCH: "riscv32"
      CFLAGS_FOR_TARGET: "-g -O2 -mcmodel=medany"
    steps:
      - uses: actions/checkout@v2
        with:
          submodules: 'true'
      - uses: hdl/conda-ci@master

  gcc-newlib-riscv64-linux:
    runs-on: "ubuntu-16.04"
    env:
      PACKAGE: "gcc/newlib"
      OS_NAME: "linux"
      TOOLCHAIN_ARCH: "riscv64"
      CFLAGS_FOR_TARGET: "-g -O2 -mcmodel=medany"
    steps:
      - uses: actions/checkout@v2
        with:
          submodules: 'true'
      - uses: hdl/conda-ci@master
